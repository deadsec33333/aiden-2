var podcastTimer=null;const RSS_PODCAST="/pu_examiner/podcast_rss.php";var podcastArticles={};var podcastURLs=[];function addToPodcast(articleID,paywallType,url,id){if(typeof podcastArticles[id]=="undefined"){const podcast={articles:[{articleID:articleID,paywallType:paywallType}],podcastID:id,url:url,podcastObj:null,completed:0};podcastArticles[id]=podcast}else if(!podcastArticles[id]["articles"].some(article=>article.articleID===articleID)){podcastArticles[id]["articles"].push({articleID:articleID,paywallType:paywallType})}if(!podcastURLs.includes(url)){podcastURLs.push(url)}clearTimeout(podcastTimer);podcastTimer=setTimeout(addOneClickMediaBTN,4e3)}function addOneClickMediaBTN(){if("undefined"===typeof Connext){clearTimeout(podcastTimer);podcastTimer=setTimeout(addOneClickMediaBTN,3e3);return}podcastURLs.forEach(function(url,index){$.ajax(RSS_PODCAST,{method:"GET",data:{rss:url},accepts:{xml:"application/rss+xml"},dataType:"xml",success:function(data){$(data).find("item").each(function(i){const el=$(this);const episodeID=$(el.find("acast\\:episodeId"))[0].innerHTML;if(episodeID in podcastArticles&&podcastArticles[episodeID].podcastObj==null){podcastArticles[episodeID].podcastObj=el}})},complete:function(data){for(const podcastID in podcastArticles){const podcastObj=podcastArticles[podcastID];if(podcastObj.podcastObj!==null&&podcastObj.completed===0){const duration=podcastObj.podcastObj.find("itunes\\:duration").text();podcastObj.articles.forEach(function(article){if(article.paywallType==="premium"){if(Connext.Storage.GetUserState()=="Subscribed"){const btnElements=$("#article-card-"+article.articleID+" .oneclick-media");btnElements.each(function(){const el=$(this);el.data("url",podcastObj.url);el.data("podcast",podcastObj.podcastID);el.css({display:""});el.html(el.html()+" "+duration)})}}else{const btnElements=$("#article-card-"+article.articleID+" .oneclick-media");btnElements.each(function(){const el=$(this);el.data("url",podcastObj.url);el.data("podcast",podcastObj.podcastID);el.css({display:""});el.html(el.html()+" "+duration)})}});podcastObj.completed=1}}}})})}function loadMedia(){event.preventDefault();const btn=event.target.closest(".oneclick-media");const card=event.target.closest(".card");const url=$(btn).data("url");const id=$(btn).data("podcast");let holder=$("#mediaPlayerHolder");if(holder.length>0){holder.empty()}else{let leftContent=$(".col-left");leftContent.append('<div id="mediaPlayerHolder"></div>')}const RSS_URL=url;const RSS_PODCAST="/pu_examiner/podcast_rss.php";$.ajax(RSS_PODCAST,{method:"GET",data:{rss:RSS_URL},accepts:{xml:"application/rss+xml"},dataType:"xml",success:function(data){$(data).find("item").each(function(i){const detailsLink=$(card).data("article-link");const el=$(this);const episodeID=$(el.find("acast\\:episodeId"))[0].innerHTML;const description=el.find("description").text().substr(0,el.find("description").text().indexOf(". "));const duration=el.find("itunes\\:duration").text();const episodeURL=el.find("enclosure").attr("url");const audioID=+id+"myaudio";if(episodeID===id){holder.empty();$("#mediaPlayerHolder").append(`
<div class="container">
    <div class="row">
        <div class="player-header">
            <div class="player-details text-center">
                <h4 class="player-header">${el.find("title").text()}</h4>
                <p class="player-description">${description}</p>
                <div class="d-flex justify-content-center" style="width: 100%;">
                    <div class="d-flex">
                        <a class="PodMoreBtn" href="/podcast-home/" style="text-decoration: none;">
                            <p style="text-align: center;font-family: Montserrat, sans-serif;font-weight: 600;font-size: 16px;line-height: 25px;">MORE PODCASTS</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-center align-items-center align-content-center" style="width: 100%;padding-top: 10px;padding-bottom: 10px;">
            <audio id="`+audioID+`" controls="controls" controlsList="nodownload">
                <source src="`+episodeURL+`">
                </source>Your browser does not support the audio tag.
            </audio> 
            <div class="podcast-share-btn">
                <a onclick="podcastShare()"><i class="fa fa-share-square" style="font-size: 34px;color: rgb(169,169,169);">&#xf14d;</i></a>
                <div class="podcast-expand-share" style="display: none">  

                    <a id="share-w"
                       href="https://api.whatsapp.com/send?text=Irish Examiner - https://www.irishexaminer.com`+detailsLink+`"
                       target="popup"
                       aria-label="Share on WhatsApp"
                       data-action="share/whatsapp/share">
                    <i class="fa fa-whatsapp" >&#xf232;</i></a>
                    
                    <a id="share-f"
                       href="http://www.facebook.com/sharer/sharer.php?u=https://www.irishexaminer.com`+detailsLink+`"
                       target="popup"
                       aria-label="Share on Facebook"
                       class="share-popup"><i class="fa fa-facebook-f" >&#xf09a;</i></a>
                     
                    <a id="share-x" 
                       href="http://www.twitter.com/intent/tweet?url=https://www.irishexaminer.com`+detailsLink+`"
                       target="popup"
                       aria-label="Share on X"
                       class="share-popup"><svg viewbox="0 0 24 24" aria-hidden="true" width="19" height="19"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg></a>
  
                </div>
            </div>
        </div>
    </div>
</div>
<div class="static-function">
    <button id="close-me" class=" btn margin-sm-left unstyled flex flex_align_center"><b>X</b></button>
</div>
                                                        `)}$("#"+audioID).trigger("play");$("#close-me").click(function(){$("#mediaPlayerHolder").empty()})})}})}function podcastShare(){$(".podcast-expand-share").fadeToggle().toggleClass("d-flex")}